

  node() {

  currentBuild.result = "SUCCESS"

  try {
      currentBuild.description = "my new description"

      stage('Checkout') {
        checkout scm
      }
      stage('NuGet') {
        try {
           bat 'exitcodes.bat'
        }
        catch (err) {
        echo "caught execption"
        println currentBuild.exitCode
        echo err;
        }
     }
    stage('WrapUp') {
        timestamps {
            bat 'echo "Success"'
            sleep(1);
          }
     }
    }
    catch  (err) {
      echo env
      echo currentBuild
      echo err;
      currentBuild.result = "FAILURE"
    }
  }
